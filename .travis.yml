language: node_js
services:
- postgresql
env:
- NODE_ENV=test
before_script:
- sudo -u postgres createuser -s foodcomputer
- npm install -g sequelize-cli
- sequelize db:create
- sequelize db:migrate
script:
- npm run lint
- npm test
branches:
  only:
  - master
notifications:
  webhooks:
    urls:
      - http://157.230.177.148:9000/hooks/deploy 
    on_success: always # default: always
    on_failure: never # default: always
    on_start: never   # default: never
    on_cancel: never # default: always
    on_error: never # default: always
